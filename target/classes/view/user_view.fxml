<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<VBox spacing="10.0" xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.smecs.controller.UserController" stylesheets="@../css/styles.css">
    <padding>
        <Insets bottom="10.0" left="10.0" right="10.0" top="10.0"/>
    </padding>

    <!-- Search and Sort Controls -->
    <HBox spacing="10.0" alignment="CENTER_LEFT">
        <TextField fx:id="searchField" promptText="Search by Name or Category" HBox.hgrow="ALWAYS"/>
        <Button mnemonicParsing="false" onAction="#handleSearch" styleClass="button-primary">
             <graphic>
                <javafx.scene.shape.SVGPath content="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="WHITE"/>
             </graphic>
             <tooltip>
                <javafx.scene.control.Tooltip text="Search Products"/>
             </tooltip>
        </Button>
        <Label text="Sort by:"/>
        <ComboBox fx:id="sortComboBox" prefWidth="150.0"/>
        <Button mnemonicParsing="false" onAction="#handleRefresh" styleClass="button-secondary">
             <graphic>
                <javafx.scene.shape.SVGPath content="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" fill="WHITE"/>
             </graphic>
             <tooltip>
                <javafx.scene.control.Tooltip text="Refresh List"/>
             </tooltip>
        </Button>
    </HBox>

    <!-- Product Table -->
    <TableView fx:id="productTable" VBox.vgrow="ALWAYS">
      <columns>
          <TableColumn fx:id="nameColumn" prefWidth="150.0" text="Product Name"/>
          <TableColumn fx:id="categoryColumn" prefWidth="120.0" text="Category"/>
          <TableColumn fx:id="priceColumn" text="Price"/>
          <TableColumn fx:id="stockColumn" prefWidth="100.0" text="Stock"/>
          <TableColumn fx:id="descriptionColumn" prefWidth="200.0" text="Description"/>
          <TableColumn fx:id="actionColumn" prefWidth="80.0" text="Action"/>
      </columns>
    </TableView>

    <!-- Status Bar -->
    <HBox spacing="20.0" alignment="CENTER_LEFT">
        <Label fx:id="statusLabel" text="Ready"/>
        <Label fx:id="cacheStatsLabel" text="Cache: --" style="-fx-text-fill: gray;"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Label fx:id="cartCountLabel" text="Cart: Empty" style="-fx-text-fill: #10b981; -fx-font-weight: bold;"/>
        <Button fx:id="viewCartButton" mnemonicParsing="false" onAction="#handleViewCart" styleClass="button-primary">
            <graphic>
                <javafx.scene.shape.SVGPath content="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z" fill="WHITE"/>
            </graphic>
            <tooltip>
                <javafx.scene.control.Tooltip text="View Cart"/>
            </tooltip>
        </Button>
    </HBox>
</VBox>
